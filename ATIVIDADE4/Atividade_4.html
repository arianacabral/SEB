<pre>
<font color="#95a5a6">&#47;*******************************************************************************</font>
<font color="#95a5a6"></font>
<font color="#95a5a6"> &nbsp;&nbsp;&nbsp;&nbsp;EXPERIMENTO 4 - CONTROLADOR DE DISPLAY LCD</font>
<font color="#95a5a6"></font>
<font color="#95a5a6">*******************************************************************************&#47;</font>

<font color="#5e6d03">#include</font> <font color="#434f54">&lt;</font><b><font color="#d35400">LiquidCrystal</font></b><font color="#434f54">.</font><font color="#000000">h</font><font color="#434f54">&gt;</font>

<font color="#434f54">&#47;&#47; LCD</font>

<b><font color="#d35400">LiquidCrystal</font></b> <font color="#000000">lcd</font><font color="#000000">(</font><font color="#000000">2</font><font color="#434f54">,</font> <font color="#000000">3</font><font color="#434f54">,</font> <font color="#000000">4</font><font color="#434f54">,</font> <font color="#000000">5</font><font color="#434f54">,</font> <font color="#000000">6</font><font color="#434f54">,</font> <font color="#000000">7</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; instanciando a variável e definido os pinos do LCD</font>

<font color="#434f54">&#47;&#47; ENTRADA ANALÓGICA</font>
<font color="#5e6d03"># define</font> <font color="#000000">POT</font> <font color="#000000">A0</font> <font color="#434f54">&#47;&#47; durante a compilação, o compilador substituirá qualquer menção de POT por A0.</font>

<font color="#434f54">&#47;&#47; VARIÁVEIS GLOBAIS</font>
<font color="#00979c">int</font> <font color="#000000">analog_POT</font><font color="#434f54">,</font> <font color="#000000">graph</font><font color="#000000">;</font>
<font color="#00979c">float</font> <font color="#000000">tensao</font><font color="#000000">;</font>

<font color="#00979c">void</font> <font color="#5e6d03">setup</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>

 &nbsp;<font color="#d35400">pinMode</font><font color="#000000">(</font><font color="#000000">POT</font><font color="#434f54">,</font> <font color="#00979c">INPUT</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; definindo o potenciômetro como um pino de entrada</font>

 &nbsp;<font color="#000000">lcd</font><font color="#434f54">.</font><font color="#d35400">begin</font><font color="#000000">(</font><font color="#000000">16</font><font color="#434f54">,</font> <font color="#000000">2</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; definindo o tipo de LCD (número de colunas e linhas)</font>

 &nbsp;<font color="#000000">lcd</font><font color="#434f54">.</font><font color="#d35400">setCursor</font><font color="#000000">(</font><font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; setando a posição do cursor no LCD</font>

 &nbsp;<font color="#000000">lcd</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34;Tensao = &#34;</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; apresentando a mensagem no LCD</font>

<font color="#000000">}</font>

<font color="#00979c">void</font> <font color="#5e6d03">loop</font><font color="#000000">(</font><font color="#000000">)</font> <font color="#000000">{</font>

 &nbsp;<font color="#000000">lcd</font><font color="#434f54">.</font><font color="#d35400">setCursor</font><font color="#000000">(</font><font color="#000000">9</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; setando a posição para apresentar a informação no LCD</font>

 &nbsp;<font color="#000000">analog_POT</font> <font color="#434f54">=</font> <font color="#d35400">analogRead</font><font color="#000000">(</font><font color="#000000">POT</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; lendo a entrada no pino analógico A0 do ARDUINO (potenciômetro)</font>

 &nbsp;<font color="#000000">tensao</font> <font color="#434f54">=</font> <font color="#000000">analog_POT</font> <font color="#434f54">*</font> <font color="#000000">(</font><font color="#000000">5.0</font> <font color="#434f54">&#47;</font> <font color="#000000">1023.0</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; convertando a leitura analógico, compreendida entre 0 e 1023, para um valor de tensao de 0 a 5 V</font>

 &nbsp;<font color="#000000">lcd</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#000000">tensao</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; apresentando o valor de tensão definido por meio do potenciômetro</font>
 &nbsp;<font color="#000000">lcd</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34; V&#34;</font><font color="#000000">)</font><font color="#000000">;</font>

 &nbsp;<font color="#000000">lcd</font><font color="#434f54">.</font><font color="#d35400">setCursor</font><font color="#000000">(</font><font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">1</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; setando a posição do cursor para apresentar as barras no LCD</font>

 &nbsp;<font color="#000000">graph</font> <font color="#434f54">=</font> <font color="#d35400">map</font><font color="#000000">(</font><font color="#000000">analog_POT</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">1023</font><font color="#434f54">,</font> <font color="#000000">0</font><font color="#434f54">,</font> <font color="#000000">16</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; mapeando a escala de 0 a 1023 do potenciômetro para uma escala de 0 a 16</font>
 &nbsp;
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">nC</font> <font color="#434f54">=</font> <font color="#000000">0</font><font color="#000000">;</font> <font color="#000000">nC</font> <font color="#434f54">&lt;</font> <font color="#000000">graph</font><font color="#000000">;</font> <font color="#000000">nC</font><font color="#434f54">++</font><font color="#000000">)</font> <font color="#000000">{</font> <font color="#434f54">&#47;&#47; imprimindo a barra no LCD para o aumento da tensão definida no potenciômetro</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">lcd</font><font color="#434f54">.</font><font color="#d35400">write</font><font color="#000000">(</font><font color="#000000">B11111111</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>
 &nbsp;<font color="#5e6d03">for</font> <font color="#000000">(</font><font color="#00979c">int</font> <font color="#000000">nC</font> <font color="#434f54">=</font> <font color="#000000">graph</font><font color="#000000">;</font> <font color="#000000">nC</font> <font color="#434f54">&lt;</font> <font color="#000000">16</font><font color="#000000">;</font> <font color="#000000">nC</font><font color="#434f54">++</font><font color="#000000">)</font> <font color="#000000">{</font><font color="#434f54">&#47;&#47; imprimindo a espaço no LCD para a redução da tensão definida no potenciômetro</font>
 &nbsp;&nbsp;&nbsp;<font color="#000000">lcd</font><font color="#434f54">.</font><font color="#d35400">print</font><font color="#000000">(</font><font color="#005c5f">&#34; &#34;</font><font color="#000000">)</font><font color="#000000">;</font>
 &nbsp;<font color="#000000">}</font>

 &nbsp;<font color="#d35400">delay</font><font color="#000000">(</font><font color="#000000">200</font><font color="#000000">)</font><font color="#000000">;</font> <font color="#434f54">&#47;&#47; delay de 200 ms</font>
<font color="#000000">}</font>

</pre>